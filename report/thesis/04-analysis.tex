\chapter{Аналитический раздел}

\section{Обзор современных систем хранения данных} 

\subsection{Определение и классификация систем управления базами данных}

Системы хранения данных, рассматриваемые в данном контексте, представляют собой совокупность языковых и программных средств, предназначенных для создания, ведения и совместного использования БД многими пользователями~\cite{database}.
Эти системы, известные также как системы управления базами данных (СУБД), обеспечивают структурированное хранение данных и поддерживают операции над ними, такие как манипуляции, индексация, выполнение сложных запросов и поддержание целостности данных. 

Существуют три основные группы моделей баз данных, различающихся структурой организации данных: дореляционные, реляционные и постреляционные базы данных.

\subsubsection{Дореляционные базы данных}

Основной особенностью дореляционных моделей является то, что взаимосвязи между данными управляются явно, и структура данных часто определяется физическим расположением данных, а не логическими ассоциациями.

Дореляционные модели включают в себя:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
	\item иерархическую модель, где структура данных представлена в виде дерева, информация в котором разбита на сегменты, имеющие строгое родитель--дочернее отношение;
	\item сетевую модель, позволяющую создавать множество связей между узлами, что делает возможным иметь несколько родителей у одного узла;
	\item инвертированные списки, строящиеся на основе терминов (слов или фраз), которые встречаются в документах или текстовых полях базы данных.
\end{enumerate}

\subsubsection{Реляционные базы данных}
 
Основной особенностью реляционных баз данных является использование структурированных таблиц, где данные организованы в столбцы и строки~\cite{kazan}.
Каждая таблица представляет собой коллекцию кортежей, общая структура которых описана в схеме таблицы. 
Таблицы могут быть связаны друг с другом через идентификаторы и ключи, что позволяет структурировать и интегрировать данные из различных источников.

Реляционные базы данных обладают набором свойств ACID:

\begin{enumerate}[leftmargin=1.6\parindent]
	\item атомарность -- транзакция будет выполнена как одно целое.
	\item согласованность -- транзакция переводит базу данных из одного согласованного состояния в другое согласованное состояние.
	\item изолированность -- транзакция исполняется изолированно от других транзакций.
	\item устойчивость -- результаты успешно завершенной транзакции будут устойчивы к будущим сбоям.
\end{enumerate}

\subsubsection{Постреляционные базы данных}

Основной особенностью постреляционных баз данных является их гибкость в обработке разноплановых и менее структурированных данных, а также поддержка более производительных способов распределения данных и масштабирования \cite{kazan}.

Виды постреляционных моделей:

\begin{enumerate}[leftmargin=1.6\parindent]
	\item ключ-значение хранилища;
	\item графы;
	\item документоориентированные базы данных.
\end{enumerate}

\clearpage
\subsection{Неоднородные данные и их особенности}

Неоднородные данные представляют собой различные типы данных, которые могут отличаться по структуре, формату и источнику. 
Среди основных характеристик неоднородных данных можно выделить следующие:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
	\item форматы -- неоднородные данные включают разнообразные форматы, такие как текст, изображения, аудио, видео, JSON, XML и таблицы SQL.
	\item источники -- неоднородные данные поступают из различных источников, включая социальные сети, системы транзакций, веб-логи и корпоративные информационные системы.
	\item структурированность -- неоднородные данные подразделяются на структурированные, полуструктурированные и неструктурированные, в зависимости от степени их организации.
\end{enumerate}

Работа с неоднородными данными требует специального подхода, учитывающего их разнородность и сложность.
Рассмотрим основные задачи, связанные с обработкой и управлением такими данными~\cite{big_data}.

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
 \item \textbf{Интеграция данных.} Объединение данных из различных источников требует нормализации, очистки и преобразования данных для обеспечения их согласованности и целостности.

 \item \textbf{Хранение данных.} Разнообразие форматов может требовать использования гибридных решений для хранения, включая в себя как реляционные, так и NoSQL системы для обработки различных типов данных.

 \item \textbf{Обработка и анализ.} Обработка разнообразных типов данных требует применения различных аналитических методов, таких как обработка естественного языка (Natural Language Processing) для текстов и алгоритмы компьютерного зрения для изображений.

 \item \textbf{Управление метаданными.} Метаданные играют важную роль в интерпретации данных и обеспечении их доступности, предоставляя информацию о происхождении, структуре и содержании данных.

\end{enumerate}

\section{Анализ предметной области систем распределенного хранения данных}

\subsection{Характеристики современных систем хранения}

Современные системы хранения данных являются фундаментальной основой для построения масштабируемых приложений, особенно в условиях растущих объемов информации и разнообразия типов данных. 
Они должны обеспечивать высокую производительность, надежность и гибкость для удовлетворения потребностей как разработчиков, так и конечных пользователей.

Ключевые характеристики современных систем хранения данных включают~\cite{systems}:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
    \item масштабируемость -- способность системы увеличивать свои ресурсы (объем хранения, производительность) по мере роста данных и нагрузки без значительной деградации производительности. Масштабируемость может быть вертикальной (увеличение ресурсов на одном сервере) и горизонтальной (добавление новых серверов в кластер);
    \item устойчивость к отказам -- обеспечение непрерывной работы системы даже при сбоях отдельных компонентов. Это достигается посредством репликации данных и избыточности серверов;
    \item производительность -- высокая скорость операций чтения и записи данных, низкая задержка при обработке запросов, что критически важно для приложений в реальном времен;
    \item гибкость модели данных -- поддержка различных моделей данных (реляционная, документоориентированная, графовая и др.) позволяет оптимально хранить и обрабатывать разные типы данных;
    \item совместимость -- возможность интеграции с другими системами и сервисами, поддержка стандартных протоколов и API;
    \item безопасность -- механизмы аутентификации, авторизации, шифрования данных и управления доступом для защиты данных от несанкционированного доступа;
    \item консистентность данных -- обеспечение целостности и согласованности данных во всех узлах распределенной системы, особенно в условиях одновременных операций чтения и записи;
    \item скалируемая архитектура -- возможность распределения нагрузки и хранения данных в масштабируемой архитектуре, такой как кластер или облако;
    \item управление транзакциями -- поддержка атомарности, согласованности, изоляции и долговечности (ACID-свойства) для гарантии правильности и надёжности операций с данными;
    \item поддержка неоднородных данных -- способность хранить и обрабатывать структурированные, полуструктурированные и неструктурированные данные.
\end{enumerate}

Современные системы хранения данных, такие как NoSQL-базы (MongoDB, Cassandra) и реляционные базы данных (PostgreSQL, MySQL), обладают различными комбинациями этих характеристик, что позволяет выбирать оптимальную систему для конкретных задач~\cite{mongo, cassandra, postgres, mySQL}.

\subsection{Влияние типов данных на выбор системы хранения}

Типы данных, с которыми предстоит работать системе, играют ключевую роль при выборе подходящей системы хранения. 
Каждая система оптимизирована для определённых видов данных и операций над ними~\cite{systems}.

\subsubsection{Структурированные данные}

Структурированные данные имеют строгую и фиксированную структуру. 
Они организованы в виде таблиц, где каждая запись соответствует определённому набору полей с предопределёнными типами данных. 
Примеры включают транзакционные данные, инвентаризационные списки, финансовые записи.

\clearpage
Для работы со структурированными данными оптимальны реляционные СУБД, такие как PostgreSQL или MySQL. 
Они обеспечивают:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Строгую схему данных и целостность при использовании ограничений и связей между таблицами.
    \item Возможность выполнения сложных запросов с использованием языка SQL.
    \item Поддержку транзакций с ACID-свойствами.
\end{enumerate}

\subsubsection{Полуструктурированные данные}

Полуструктурированные данные не обладают строгой схемой, но имеют внутреннюю организацию и метаданные. 
Примеры включают XML, JSON-файлы, логи приложений.

Документоориентированные СУБД, такие как MongoDB или Cassandra, подходят для работы с полуструктурированными данными, предоставляя:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Гибкую схему данных, позволяющую хранить документы с различной структурой.
    \item Высокую производительность при операциях с большими объёмами документов.
    \item Масштабируемость и отказоустойчивость в распределённых средах.
\end{enumerate}

\subsubsection{Неструктурированные данные}

Неструктурированные данные не имеют предопределённой модели и включают текстовые документы, изображения, аудио и видео файлы. Их обработка требует специального подхода.

\clearpage
Системы хранения данных для неструктурированных данных, такие как Hadoop HDFS или Amazon S3, позволяют:

\begin{enumerate}
    \item Хранить большие объёмы данных в распределённой среде.
    \item Обрабатывать данные с использованием параллельных вычислений (например, MapReduce).
    \item Использовать специализированные инструменты для анализа и поиска в данных.
\end{enumerate}

\subsubsection{Графовые данные}

Графовые данные состоят из узлов и связей между ними, что позволяет моделировать сложные взаимоотношения. 
Применяются в социальных сетях, рекомендационных системах, анализе связей.

Графовые СУБД, такие как Neo4j или OrientDB, предлагают:

\begin{enumerate}
    \item Хранение и обработку графовых структур данных.
    \item Быстрый доступ к связанным данным без необходимости сложных JOIN-операций.
    \item Специфичные языки запросов для работы с графами (например, Cypher).
\end{enumerate}

\subsubsection{Выбор системы хранения}

Таким образом, при выборе системы хранения необходимо учитывать:

\begin{enumerate}
    \item Типы данных и их структуру.
    \item Объём данных и прогнозируемый рост.
    \item Требования к производительности и масштабируемости.
    \item Необходимость в транзакционной целостности и консистентности данных.
    \item Возможность интеграции с существующими системами и инструментами.
\end{enumerate}

Понимание типов данных и их особенностей позволяет выбрать оптимальную систему хранения для конкретных задач.

\subsection{Особенности хранения текстов и структурированных данных на примере \\ структуры \textit{Пользователь}}

В системе совместной работы над проектами структура \textit{Пользователь} является одной из ключевых и включает в себя как структурированные данные, так и связи с другими сущностями системы.

Структура \textit{Пользователь} может включать следующие поля:

\begin{enumerate}[wide=12.6mm, leftmargin=12.6mm]
    \item \textbf{ФИО} -- строковые поля для хранения имени, фамилии и отчества пользователя.
    \item \textbf{Логин} -- уникальный идентификатор пользователя в системе.
    \item \textbf{Пароль} -- хеш пароля для аутентификации пользователя.
    \item \textbf{Фото} -- ссылка на изображение профиля пользователя.
    \item \textbf{Связи с проектами} -- информация о проектах, к которым пользователь имеет доступ, а также о проектах, созданных пользователем.
\end{enumerate}

Кроме того, система хранит неструктурированные данные, которые включают такие элементы как тексты и другие мультимедийные данные, представленные в формате JSON.

\subsubsection{Хранение структурированных данных}

Реляционная база данных является оптимальным выбором для хранения структурированных данных пользователей по следующим причинам:

\begin{enumerate}[wide=12.6mm, leftmargin=12.6mm]
    \item \textbf{Строгая схема данных}. Реляционные СУБД позволяют задать фиксированную структуру данных, обеспечивая строгую организацию информации о пользователях. Это важно для обеспечения целостности данных, что критично для таких атрибутов, как идентификатор, логин, и хеш пароля.
    \item \textbf{Связи между таблицами}. Возможность моделирования сложных связей между таблицами позволяет управлять отношениями между пользователями и другими сущностями, такими как проекты. Это упрощает реализацию функциональности, связанной с ролями доступа и управления проектами.
    \item \textbf{Безопасность и транзакционность}. Реляционные базы данных поддерживают ACID-транзакции, что гарантирует надёжность и консистентность данных, особенно важных в операциях, таких как регистрация новых пользователей и управление их аутентификацией.
\end{enumerate}

Пример создания таблицы пользователей показывает, как можно определить строгую схему для хранения ключевой информации о пользователях~\ref{lst:ex1.sql}:
\includelisting
	{ex1.sql}
	{Создание таблицы пользователей}

Для управления связями пользователей с проектами используется дополнительная таблица, что позволяет организовать реляцию «многие ко многим» и управлять ролями и правами доступа~\ref{lst:ex2.sql}:
\includelisting
	{ex2.sql}
	{Создание таблицы связей пользователей с проектами}

\clearpage

\subsubsection{Хранение текстов в формате JSON}

Для хранения текстов, представленных в формате JSON, выбрана нереляционная база данных по следующим причинам:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item \textbf{Отсутствие фиксированной схемы}. Нереляционные базы данных позволяют работать с динамически изменяющимися данными, такими как текстовые блоки, и их метаданные. Это позволяет адаптировать структуру хранения в соответствии с изменяющимися требованиями без необходимости изменения схемы.
    \item \textbf{Гибкость и масштабируемость}. Такие системы плавно подстраиваются под изменяющиеся объёмы данных и требования, позволяя легко хранить и манипулировать информацией в формате JSON.
    \item \textbf{Высокая производительность при работе с документами}. Оптимизация под работу с JSON-документами обеспечивает быструю обработку и выборку данных, что важно при хранении и доступе к текстовым описаниям и метаданным.
\end{enumerate}

Пример документа в нереляционной базе данных представлен в листинге~\ref{lst:ex3.wt}:
\includelisting
	{ex3.wt}
	{Пример документа в нереляционной базе данных}

Поле \texttt{user\_id} связывает текст с конкретным пользователем из реляционной базы данных, что позволяет осуществлять интеграцию между реляционной и нереляционной системами хранения на уровне приложения. 

\subsubsection{Хранение схем объектов для расширяемости системы}

Чтобы обеспечить возможность расширения системы и добавления новых типов объектов без необходимости изменения существующего кода или структуры базы данных, необходимо хранить схемы объектов в базе данных. 
Это касается таких объектов, как тексты, изображения, графики и другие пользовательские сущности.

Нереляционная база данных, благодаря своей гибкой схеме и документноориентированной структуре, подходит для хранения как данных, так и соответствующих им схем.
Схемы объектов могут быть сохранены в специальной коллекции, например, \texttt{objectSchemas}, где каждый документ описывает структуру определённого типа объекта.

Пример документа-схемы показан в листинге~\ref{lst:ex4.wt}:
\includelisting
	{ex4.wt}
	{Пример документа-схемы}

\clearpage

\section{Сравнение систем распределенного хранения данных}

\subsection{Сравнение систем хранения}

Для сравнения MongoDB, PostgreSQL, MySQL и Cassandra использованы следующие критерии:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
    \item \textbf{Горизонтальная масштабируемость}: возможность расширения системы путём добавления новых серверов.
    \item \textbf{Вертикальная масштабируемость}: возможность улучшения производительности через увеличение мощности существующих серверов.
    \item \textbf{Изменяемость схемы данных}: простота адаптации к изменяющейся структуре данных.
    \item \textbf{Поддержка различных форматов данных}: работа с JSON и другими современными форматами.
    \item \textbf{Консистенция данных}: гарантии целостности данных.
    \item \textbf{Поддержка транзакций}: наличие и применение транзакций с ACID-свойствами.
    \item \textbf{Поддержка полуструктурированных и неструктурированных данных}: возможность работы с менее структурированными данными.
    \item \textbf{Поддержка структурированных данных}: работа с классической реляционной моделью.
    \item \textbf{Активность и поддержка сообщества}: включая доступность документации, форумов и специалистов.
    \item \textbf{Инструменты и интеграции}: доступность инструментов для разработки и интеграции с другими технологиями.
\end{enumerate}

На основе этих критериев составлена таблица сравнения MongoDB, PostgreSQL, MySQL и Cassandra (таблица~\ref{tab:comparison})~\cite{data-aggreg, ran}.
При оценке критериев был применен весовой коэффициент, где «плюс» оценивается в 1 балл, «минус» в 0 баллов, а «плюс-минус» в 0.5 балла.
\begin{table}[h] 
    \centering 
    \caption{Сравнение MongoDB, PostgreSQL, MySQL и Cassandra} 
    \label{tab:comparison} 
    \begin{tabular}{|>{\centering\arraybackslash}p{4cm}|>{\centering\arraybackslash}p{2.5cm}|>{\centering\arraybackslash}p{2.5cm}|>{\centering\arraybackslash}p{2.5cm}|>{\centering\arraybackslash}p{2.5cm}|} 
        \hline 
        \textbf{Критерий сравнения} & \textbf{MongoDB} & \textbf{PostgreSQL} & \textbf{MySQL} & \textbf{Cassandra} \\ \hline 
        Горизонтальная масштабируемость & \textbf{+} & +– & – & \textbf{+} \\ \hline 
        Вертикальная масштабируемость & – & \textbf{+} & \textbf{+} & – \\ \hline 
        Изменяемость схемы данных & \textbf{+} & +– & – & \textbf{+} \\ \hline 
        Поддержка различных форматов данных & \textbf{+} & – & – & \textbf{+} \\ \hline 
        Консистенция данных & – & \textbf{+} & \textbf{+} & – \\ \hline 
        Поддержка транзакций & – & \textbf{+} & \textbf{+} & – \\ \hline 
        Поддержка полуструктурированных и неструктурированных данных & \textbf{+} & – & – & \textbf{+} \\ \hline 
        Поддержка структурированных данных & – & \textbf{+} & \textbf{+} & – \\ \hline 
        Активность и поддержка сообщества & \textbf{+} & \textbf{+} & \textbf{+} & +– \\ \hline 
        Инструменты и интеграции & \textbf{+} & \textbf{+} & \textbf{+} & +– \\ \hline 
        \textbf{Сумма баллов} & \textbf{6} & \textbf{7} & \textbf{6} & \textbf{5} \\ \hline 
    \end{tabular} 
\end{table}
\clearpage

Из таблицы видно, что MongoDB и PostgreSQL лучше удовлетворяют ключевые критерии по сравнению с Cassandra и MySQL, однако ни одна из баз данных не охватывает все требования полностью. 
В связи с этим для выполнения всех задач системы необходимо их совместное использование.
Это позволит:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Использовать \textbf{MongoDB} для хранения полуструктурированных и неструктурированных данных, таких как тексты, документы, мультимедиа и схемы объектов.
    \item Применять \textbf{PostgreSQL} для хранения структурированных данных, требующих строгой консистентности и поддержки транзакций, таких как информация о пользователях, правах доступа, связях между объектами системы.
    \item Объединить сильные стороны обеих систем, создавая гибкую, масштабируемую и надежную систему хранения, способную эффективно по времени и памяти обрабатывать неоднородные данные.
\end{enumerate}

\subsection{Реализация распределённых баз данных на примере MongoDB и PostgreSQL}

Распределённые базы данных позволяют хранить и обрабатывать данные на нескольких серверах, обеспечивая масштабируемость, отказоустойчивость и высокую доступность системы.

\subsubsection{MongoDB}

MongoDB изначально спроектирована как распределённая документноориентированная база данных. 
Её основные механизмы реализации распределённости включают:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item \textbf{Шардинг} -- горизонтальное разделение данных по нескольким узлам (шардам). Позволяет масштабировать базу данных горизонтально, добавляя новые серверы для обработки увеличивающихся объёмов данных и нагрузки~\cite{shard-rep}.
    \item \textbf{Репликация} -- процесс копирования и поддержания синхронных копий данных на нескольких узлах. Обеспечивает отказоустойчивость и высокую доступность системы, позволяя автоматически переключаться на резервные узлы в случае сбоя основного~\cite{shard-rep}.
    \item \textbf{Балансировка нагрузки} -- распределение запросов между узлами кластера для обеспечения оптимальной производительности.
\end{enumerate}


\subsubsection{PostgreSQL}

PostgreSQL изначально не является распределённой СУБД, однако существуют инструменты и расширения, позволяющие реализовать распределённость:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item \textbf{Репликация}. PostgreSQL поддерживает потоковую репликацию на уровне основного и репликантных серверов, что обеспечивает отказоустойчивость и балансировку нагрузки на чтение~\cite{postgres-rep}.
    \item \textbf{Логическая репликация}. Позволяет реплицировать отдельные таблицы и данные, что обеспечивает большую гибкость при настройке репликации~\cite{postgres-rep}.
    \item \textbf{Расширения для горизонтального масштабирования}:
    \begin{enumerate}
        \item \textbf{Citus} ---расширение для PostgreSQL, которое превращает его в распределённую систему путем горизонтального масштабирования таблиц по узлам кластера~\cite{citusdata}. Citus позволяет автоматически распределять данные по узлам и параллельно обрабатывать запросы, увеличивая производительность и масштабируемость.
        \item \textbf{Postgres-XL} -- масштабируемая распределённая база данных на основе PostgreSQL, обеспечивающая параллельную обработку запросов и распределение данных~\cite{postgres-xl}. Предоставляет как масштабирование на чтение, так и на запись, поддерживает транзакции и обеспечивает согласованность данных в кластере.
        \item \textbf{pg\_pool и pg\_bouncer} -- инструменты для управления пулом подключений и балансировки нагрузки, которые помогают улучшить производительность и масштабируемость системы~\cite{pgpool}\cite{pgbouncer}. Позволяют распределять запросы между основным сервером и репликами для оптимального использования ресурсов.
    \end{enumerate}
\end{enumerate}

Эти инструменты позволяют масштабировать PostgreSQL \textbf{горизонтально}, то есть увеличивать производительность системы путем добавления новых серверов или узлов. 
Горизонтальное масштабирование позволяет обрабатывать больший объем данных и нагрузку благодаря распределению данных и запросов по нескольким узлам. 
Это делает PostgreSQL пригодным для использования в распределённых системах.

\subsection{Особенности сочетания MongoDB и PostgreSQL}

Совместное использование MongoDB и PostgreSQL позволяет работать с разными типами данных и соблюдать требования к ним.

Основные преимущества совместного использования:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
    \item \textbf{Оптимизация по типу данных}. Каждая СУБД используется для тех типов данных, с которыми она работает наиболее производительно.
    \item \textbf{Масштабируемость}. Возможность масштабировать компоненты системы независимо друг от друга.
    \item \textbf{Гибкость разработки}. Ускорение разработки благодаря использованию гибких инструментов для разных задач.
\end{enumerate}

Однако при совместном использовании стоит учитывать следующие сложности:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
    \item \textbf{Интеграция данных}. Требуется обеспечить согласованность данных между двумя СУБД, что может быть реализовано через уровень приложения и чёткое разделение ответственности.
    \item \textbf{Управление системой}. Необходимость поддержки и администрирования двух различных систем.
    \item \textbf{Безопасность и авторизация}. Разработка единой системы аутентификации и авторизации для доступа к данным в обеих базах данных.
\end{enumerate}

\section{Методы сетевого многопользовательского взаимодействия}

При создании системы для совместной работы нужно помнить, что пользователи могут одновременно редактировать одни и те же данные (заметки, задачи, схемы), поэтому система должна обеспечивать согласованность данных и актуальность их отображения для всех участников. 
Рассмотрим ключевые аспекты и методы, обеспечивающие такое взаимодействие.

\subsection{Архитектуры взаимодействия}

Существуют две основные архитектуры для построения сетевого взаимодействия.

\subsubsection{Централизованная (Клиент-Серверная)} 

Наиболее распространенная архитектура для веб-приложений. 
Все клиенты (браузеры пользователей) подключаются к центральному серверу или кластеру серверов. 
Сервер хранит основные данные, обрабатывает запросы клиентов, управляет логикой приложения и обеспечивает синхронизацию данных между пользователями.

Из преимуществ можно выделить относительную простоту управления состоянием и согласованностью данных, так как сервер является единым источником истины, и простоту реализации контроля доступа и безопасности.
Но сервер может стать узким местом по производительности при отсутствии масштабирования. 
Еще одним недостатком является единая точка отказа.

\subsubsection{Децентрализованная (Peer-to-Peer, P2P)} 
Узлы (пользователи) взаимодействуют напрямую друг с другом, без центрального сервера, или с минимальным его участием, например, для обнаружения узлов. 
Каждый узел хранит копию данных или ее часть и обменивается изменениями с другими узлами.

К достоинствам можно отнести высокую отказоустойчивость, так как нет единой точки отказа, потенциально лучшую масштабируемость для некоторых задач и меньшую нагрузку на центральную инфраструктуру.
Однако в такой системе значительно сложнее обеспечить согласованность данных, разрешать конфликты и гарантировать безопасность. 

Для большинства систем совместной работы клиент-серверная архитектура является более предпочтительной из-за упрощения задач синхронизации и управления. 
Однако элементы P2P могут использоваться для специфических функций, например, WebRTC для видеозвонков в чатах.

\subsection{Протоколы и подходы к обмену данными}

На прикладном уровне для взаимодействия клиента и сервера используются различные протоколы и подходы:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
\item \textbf{HTTP/S с REST API или GraphQL.} Клиент отправляет запросы (GET, POST, PUT, DELETE и т.д.) на сервер для получения или изменения данных. REST является стандартным архитектурным стилем. GraphQL предлагает более гибкий подход к запросу данных клиентом. Подходит для операций, не требующих немедленного отклика у других пользователей, например, сохранение профиля, создание нового проекта.
\item \textbf{WebSockets}. Протокол, обеспечивающий постоянное двунаправленное соединение между клиентом и сервером. Подходит для функций, требующих обмена данными в реальном времени, таких как совместное редактирование документов, мгновенные уведомления, чаты, отображение статуса присутствия пользователей. Сервер может отправлять данные клиенту по своей инициативе, без запроса от клиента, что критично для real-time функциональности.
\item \textbf{Базовый транспортный протокол.} Как правило, для надежной передачи данных в клиент-серверных веб-приложениях используется TCP, который гарантирует доставку пакетов в правильном порядке и контроль целостности, что важно для синхронизации данных. UDP используется реже, в основном там, где допустима потеря пакетов ради скорости, например, в некоторых играх или потоковом видео.
\end{enumerate}

Учитывая необходимость обеспечения функций совместной работы, чата и мгновенных уведомлений в реальном времени, для разрабатываемого комплекса в качестве основного механизма синхронизации состояния между клиентами и сервером выбран протокол WebSockets. 
Для стандартных операций с данными, не требующих немедленной синхронизации, будет использоваться HTTP/S с применением REST-подхода.

\section{Формализация задачи создания комплекса}

\subsection{Исходные задачи программно--алгоритмического комплекса}

Исходные задачи программно--алгоритмического комплекса включают:

\begin{enumerate}[wide=12.5mm, leftmargin=12.5mm]
    \item \textbf{Регистрация и аутентификация пользователей} -- предоставление возможности пользователям создавать учетные записи, входить в систему и управлять своими профилями.
    \item \textbf{Создание и управление проектами} -- пользователи могут создавать проекты, настраивать их параметры, а также управлять доступом к ним.
    \item \textbf{Добавление пользователей в проекты} -- возможность приглашать других пользователей в проекты, назначать роли и права доступа.
    \item \textbf{Совместное редактирование документов} -- предоставление инструментов для создания и редактирования различных типов документов внутри проектов:
    \begin{enumerate}
        \item \textbf{Записки} -- создание текстовых документов с возможностью форматирования и вставки элементов.
        \item \textbf{Схемы} -- создание и редактирование диаграмм и схем в режиме онлайн.
        \item \textbf{Онлайн-презентации} -- создание и демонстрация презентаций внутри проекта.
        \item \textbf{База знаний} -- формирование и поддержка базы знаний проекта.
        \item \textbf{Графики и диаграммы} -- визуализация данных в виде графиков и диаграмм.
        \item \textbf{Mind map} -- создание интеллектуальных карт для структурирования идей.
    \end{enumerate}
    \item \textbf{Дополнительные сервисы проекта}:
    \begin{enumerate}
        \item \textbf{Календарь} -- интеграция календаря для планирования мероприятий и событий проекта.
        \item \textbf{Трекер задач} -- управление задачами и отслеживание их выполнения.
        \item \textbf{Чат} -- реализация коммуникации между участниками проекта в режиме реального времени.
    \end{enumerate}
    \item \textbf{Обеспечение безопасности данных} -- защита данных пользователей и проектов от несанкционированного доступа.
    \item \textbf{Масштабируемость системы} -- возможность системы эффективно по времени работать при увеличении количества пользователей и проектов.
    \item \textbf{Модульная система для добавления новых сущностей и сервисов} -- разработка и интеграция модульного подхода, который позволит расширять функциональность системы. Данный подход обеспечивает возможность:
    \begin{enumerate}
        \item \textbf{Добавления новых сущностей в базу данных} -- гибкое изменение схемы данных для интеграции новых типов данных и сущностей без необходимости модификации основной структуры базы данных.
        \item \textbf{Создания новых сервисов} -- разработка дополнительных инструментов и служб, что позволяет адаптировать систему под изменяющиеся требования пользователей и проектов.
    \end{enumerate}  
\end{enumerate}

\clearpage

\subsection{Диаграмма вариантов использования}

Диаграмма вариантов использования представляет основные функции системы и взаимодействия пользователей с ней. 
Опишем основные варианты использования программно-алгоритмического комплекса:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Регистрация в системе.
    \item Вход в систему (аутентификация).
    \item Просмотр и редактирование своего профиля.
    \item Создание проекта.
    \item Приглашение других пользователей в проект.
    \item Создание и редактирование:
    \begin{enumerate}
        \item Записок.
        \item Схем.
        \item Презентаций.
        \item Mind map.
    \end{enumerate}
    \item Использование дополнительных сервисов:
    \begin{enumerate}
        \item Календарь.
        \item Трекер задач.
        \item Чат.
    \end{enumerate}
    \item Управление правами доступа участников проекта.
    \item Просмотр и участие в проектах, в которые он добавлен.
\end{enumerate}
\clearpage

На рисунке~\ref{img:use-case-common} представлена общая диаграмма вариантов использования сервиса.
\includeimage
	{use-case-common}
	{f}
	{H}
	{1\textwidth}
	{Диаграмма вариантов использования сервиса}
\clearpage

На рисунке~\ref{img:use-notion} представлена диаграмма вариантов использования записок.
\includeimage
	{use-notion}
	{f}
	{H}
	{1\textwidth}
	{Диаграмма вариантов использования записок}
\clearpage

На рисунке~\ref{img:use-drawio} представлена диаграмма вариантов использования схем и mind map.
\includeimage
	{use-drawio}
	{f}
	{H}
	{0.7\textwidth}
	{Диаграмма вариантов использования схем и mind map}

На рисунке~\ref{img:use-calendar} представлена диаграмма вариантов использования календаря.
\includeimage
	{use-calendar}
	{f}
	{H}
	{0.5\textwidth}
	{Диаграмма вариантов использования календаря}

\clearpage

На рисунке~\ref{img:use-tracker} представлена диаграмма вариантов использования трекера задач.
\includeimage
	{use-tracker}
	{f}
	{H}
	{0.6\textwidth}
	{Диаграмма вариантов использования трекера задач}

\clearpage

На рисунке~\ref{img:use-chat} представлена диаграмма вариантов использования чата.
\includeimage
	{use-chat}
	{f}
	{H}
	{1\textwidth}
	{Диаграмма вариантов использования чата}

\clearpage

На рисунке~\ref{img:use-presentation} представлена диаграмма вариантов использования презентаций.
\includeimage
	{use-presentation}
	{f}
	{H}
	{1\textwidth}
	{Диаграмма вариантов использования презентаций}

\clearpage

\subsection{Анализ требований пользователей и ролей}

Для реализации системы необходимо определить основные роли пользователей и их требования к системе.

\subsubsection{Роли пользователей}

Первично предполагаются следующие роли в системе:

\begin{enumerate}[leftmargin=1.6\parindent]
    \item \textbf{Гость} --- пользователь, не зарегистрированный в системе. Имеет ограниченный доступ, может просматривать публичную информацию о системе.
    \item \textbf{Зарегистрированный пользователь} имеет учетную запись в системе. Может создавать проекты, присоединяться к проектам, использовать доступные инструменты.
    \item \textbf{Администратор проекта} --- пользователь, создавший проект или назначенный администратором. Имеет расширенные права на управление проектом и его участниками.
    \item \textbf{Системный администратор} отвечает за общую поддержку и администрирование системы, управление пользователями, настройку прав доступа.
\end{enumerate}

\subsubsection{Требования пользователей}

\textbf{1. Гость}

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Возможность просматривать информацию о системе и её возможностях.
    \item Возможность зарегистрироваться в системе.
\end{enumerate}

\textbf{2. Зарегистрированный пользователь}

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Возможность входа в систему с использованием учетных данных.
    \item Создание новых проектов.
    \item Просмотр и участие в проектах, в которые пользователь добавлен.
    \item Использование инструментов для создания и редактирования контента (записки, схемы, презентации и т.д.).
    \item Участие в коммуникациях проекта (чат).
    \item Просмотр календаря и задач проекта.
\end{enumerate}

\textbf{3. Администратор проекта}

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Все возможности зарегистрированного пользователя.
    \item Управление участниками проекта (добавление/удаление пользователей).
    \item Назначение ролей и прав доступа участникам проекта.
    \item Настройка параметров проекта.
\end{enumerate}

\textbf{4. Системный администратор}

\begin{enumerate}[leftmargin=1.6\parindent]
    \item Управление пользователями системы (блокировка/разблокировка учетных записей, восстановление доступа).
    \item Настройка глобальных параметров системы.
\end{enumerate}

\section*{Вывод}

Современные системы управления базами данных (СУБД) подразделяются на дореляционные, реляционные и постреляционные, каждая из которых отвечает различным требованиям к хранению данных — от строгих структурированных до более гибких моделей. 
Для хранения неоднородных данных, таких как в системах совместной работы над проектами, выбор конкретной модели определяется специфическими потребностями. 
Например, реляционные базы данных подходят, когда требуются строгая схема и сложные связи между сущностями, как в случае данных о пользователях. 
В то же время, нереляционные базы, такие как MongoDB, обеспечивают гибкость и масштабируемость при работе с полуструктурированными данными в формате JSON. 
Сравнительный анализ показал, что сочетание MongoDB и PostgreSQL позволяет использовать преимущества каждой модели, обеспечивая надежность и целостность структурированных данных, что является важным для адаптации системы к нуждам проекта. 
Однако это требует тщательного планирования, интеграции и управления сложностями.

Для разрабатываемого комплекса была выбрана клиент-серверная архитектура как обеспечивающая большую простоту управления состоянием и безопасностью. 
Были определены основные протоколы взаимодействия: HTTP/S с REST для стандартных запросов и WebSockets для обеспечения функциональности в реальном времени (совместное редактирование, чаты, уведомления).

В результате формализации задачи были определены исходные задачи программно-алгоритмического комплекса, охватывающие основные функциональные возможности системы совместной работы над проектами, а также был проведен анализ ролей пользователей.
